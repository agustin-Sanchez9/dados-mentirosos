{{define "results_screen"}}
<div id="game-container" class="w-[95%] max-w-3xl mx-auto flex flex-col bg-slate-900 shadow-2xl rounded-2xl overflow-hidden border border-slate-700 my-6 relative">
    
    <div class="p-6 text-center {{if eq .MyID .Result.WinnerID}}bg-green-600{{else}}bg-red-600{{end}} text-white">
        <h1 class="text-3xl font-black uppercase tracking-widest mb-1">
            {{if eq .MyID .Result.WinnerID}}Â¡GANASTE!{{else}}PERDISTE{{end}}
        </h1>
        <p class="text-sm opacity-90">
            {{if .Result.IsLiar}}
                Â¡Era Mentira! HabÃ­a menos dados de lo dicho.
            {{else}}
                Â¡Era Verdad! La apuesta era correcta.
            {{end}}
        </p>
    </div>

    <div class="bg-slate-800 p-4 border-b border-slate-700 flex justify-around items-center text-center">
        <div>
            <p class="text-xs text-slate-400 uppercase">Apuesta</p>
            <p class="text-xl font-bold">{{.Result.BetQuantity}} x ðŸŽ²{{.Result.BetFace}}</p>
        </div>
        <div class="text-2xl">vs</div>
        <div>
            <p class="text-xs text-slate-400 uppercase">Realidad</p>
            <p class="text-xl font-bold {{if .Result.IsLiar}}text-red-400{{else}}text-green-400{{end}}">
                Total: {{.Result.RealCount}}
            </p>
        </div>
    </div>

    <div class="p-6 bg-slate-900 grid gap-4">
        <h2 class="text-center text-slate-500 text-sm font-bold mb-2">DADOS REVELADOS</h2>
        
        <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
            {{range .Players}}
            <div class="bg-slate-800 p-3 rounded-lg border {{if eq .ID $.Result.WinnerID}}border-green-500 shadow-[0_0_15px_rgba(34,197,94,0.3)]{{else if eq .ID $.Result.LoserID}}border-red-500 opacity-75{{else}}border-slate-700{{end}}">
                <div class="flex justify-between items-center mb-2">
                    <span class="font-bold text-sm truncate">{{.Name}}</span>
                    {{if eq .ID $.Result.WinnerID}}ðŸ‘‘{{end}}
                    {{if eq .ID $.Result.LoserID}}ðŸ’€{{end}}
                </div>
                <div class="flex flex-wrap gap-1 justify-center">
                    {{range .Dice}}
                        <div class="w-8 h-8 flex items-center justify-center rounded bg-slate-200 text-slate-900 font-bold text-sm {{if or (eq (toInt .) $.Result.BetFace) (and $.Config.WildAces (eq (toInt .) 1))}}ring-2 ring-yellow-400 bg-white{{else}}opacity-50{{end}}">
                            {{.}}
                        </div>
                    {{end}}
                </div>
            </div>
            {{end}}
        </div>
    </div>

    {{if .IsHost}}
    <div class="p-4 bg-slate-800 border-t border-slate-700 flex flex-col gap-3">
        
        <button hx-post="/game/next-round?roomID={{.RoomID}}" 
                class="w-full bg-green-600 hover:bg-green-500 text-white font-bold py-3 rounded-lg shadow-[0_4px_0_rgb(21,128,61)] active:shadow-none active:translate-y-[4px] transition-all flex items-center justify-center gap-2">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12h14"/><path d="M12 5l7 7-7 7"/></svg>
            JUGAR SIGUIENTE RONDA
        </button>

        <button hx-post="/game/restart?roomID={{.RoomID}}" 
                class="w-full bg-slate-700 hover:bg-slate-600 text-slate-300 font-bold py-3 rounded-lg border border-slate-600 flex items-center justify-center gap-2 text-sm">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/><path d="M3 3v5h5"/></svg>
            Volver al Lobby (Configurar)
        </button>
        
        <p class="text-center text-[10px] text-slate-500 mt-1">
            "Siguiente Ronda" mantiene la configuraciÃ³n actual y empieza el perdedor.
        </p>
    </div>
    {{else}}
    <div class="p-4 text-center text-slate-500 text-sm italic animate-pulse">
        Esperando que el anfitriÃ³n decida...
    </div>
    {{end}}
</div>
{{end}}